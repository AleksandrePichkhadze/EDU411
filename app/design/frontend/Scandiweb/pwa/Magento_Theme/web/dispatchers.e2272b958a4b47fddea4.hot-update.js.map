{"version":3,"sources":["webpack:////var/www/public/vendor/scandipwa/source/src/app/store/ProductList/ProductList.dispatcher.js"],"names":["ProductListDispatcher","data","dispatch","options","products","items","total_count","page_info","total_pages","args","isNext","currentPage","appendPage","updateProductListItems","error","showNotification","updateNoMatch","updateLoadStatus","updatePageLoadingStatus","ProductListQuery","getQuery","Object","defineProperty","_ProductListDispatcher","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;AAWA;AACA;AACA;AACA;AAMA;AAEA;;;;;;;AAMO,IAAMA,sBAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,kCACkB;AACV,8FAAkB,aAAlB;AACH;AAHL;AAAA;AAAA,8BAKcC,IALd,EAKoBC,QALpB,EAK8BC,OAL9B,EAKuC;AAAA,2BAO3BF,IAP2B,CAE3BG,QAF2B;AAAA,mDAMvB,EANuB;AAAA,UAGvBC,KAHuB,kBAGvBA,KAHuB;AAAA,UAIvBC,WAJuB,kBAIvBA,WAJuB;AAAA,iDAKvBC,SALuB;AAAA,iEAKM,EALN;AAAA,UAKVC,WALU,yBAKVA,WALU;AAAA,UASvBC,IATuB,GASNN,OATM,CASvBM,IATuB;AAAA,UASjBC,MATiB,GASNP,OATM,CASjBO,MATiB;AAAA,UAUvBC,WAVuB,GAUPF,IAVO,CAUvBE,WAVuB;;AAY/B,UAAID,MAAJ,EAAY;AACR,eAAOR,QAAQ,CACXU,kIAAU,CACNP,KADM,EAENM,WAFM,CADC,CAAf;AAMH;;AAED,aAAOT,QAAQ,CACXW,8IAAsB,CAClBR,KADkB,EAElBM,WAFkB,EAGlBL,WAHkB,EAIlBE,WAJkB,EAKlBC,IALkB,CADX,CAAf;AASH;AAnCL;AAAA;AAAA,4BAqCYK,KArCZ,EAqCmBZ,QArCnB,EAqC6B;AACrBA,cAAQ,CAACa,0IAAgB,CAAC,OAAD,EAAU,8BAAV,EAA0CD,KAA1C,CAAjB,CAAR;AACAZ,cAAQ,CAACc,6HAAa,CAAC,IAAD,CAAd,CAAR;AACH;AAxCL;AAAA;AAAA,mCA0CmBb,OA1CnB,EA0C4BD,QA1C5B,EA0CsC;AAAA,UACtBQ,MADsB,GACXP,OADW,CACtBO,MADsB;;AAG9B,UAAI,CAACA,MAAL,EAAa;AACTR,gBAAQ,CAACe,wIAAgB,CAAC,IAAD,CAAjB,CAAR;AACH,OAFD,MAEO;AACHf,gBAAQ,CAACgB,+IAAuB,EAAxB,CAAR;AACH;;AAED,aAAOC,0GAAgB,CAACC,QAAjB,CAA0BjB,OAA1B,CAAP;AACH;AApDL;;AAAA;AAAA;AA5BAkB,MAAM,CAACC,cAAP,CAAsBC,sBAAtB,EAA8C,MAA9C,EAAsD;AAAEC,OAAK,EAAE;AAAT,CAAtD;;;AAmFe,mEAAIxB,qBAAJ,EAAf,E","file":"dispatchers.e2272b958a4b47fddea4.hot-update.js","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport ProductListQuery from 'Query/ProductList.query';\nimport { updateNoMatch } from 'Store/NoMatch/NoMatch.action';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport {\n    appendPage,\n    updateLoadStatus,\n    updatePageLoadingStatus,\n    updateProductListItems\n} from 'Store/ProductList/ProductList.action';\nimport { QueryDispatcher } from 'Util/Request';\n\n/**\n * Product List Dispatcher\n * @class ProductListDispatcher\n * @extends QueryDispatcher\n * @namespace Store/ProductList/Dispatcher\n */\nexport class ProductListDispatcher extends QueryDispatcher {\n    __construct() {\n        super.__construct('ProductList');\n    }\n\n    onSuccess(data, dispatch, options) {\n        const {\n            products: {\n                items,\n                total_count,\n                page_info: { total_pages } = {}\n            } = {}\n        } = data;\n\n        const { args, isNext } = options;\n        const { currentPage } = args;\n\n        if (isNext) {\n            return dispatch(\n                appendPage(\n                    items,\n                    currentPage\n                )\n            );\n        }\n\n        return dispatch(\n            updateProductListItems(\n                items,\n                currentPage,\n                total_count,\n                total_pages,\n                args\n            )\n        );\n    }\n\n    onError(error, dispatch) {\n        dispatch(showNotification('error', 'Error fetching Product List!', error));\n        dispatch(updateNoMatch(true));\n    }\n\n    prepareRequest(options, dispatch) {\n        const { isNext } = options;\n\n        if (!isNext) {\n            dispatch(updateLoadStatus(true));\n        } else {\n            dispatch(updatePageLoadingStatus());\n        }\n\n        return ProductListQuery.getQuery(options);\n    }\n}\n\nexport default new ProductListDispatcher();\n"],"sourceRoot":""}