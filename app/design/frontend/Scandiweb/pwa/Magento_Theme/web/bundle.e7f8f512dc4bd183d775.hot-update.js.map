{"version":3,"sources":["webpack:////var/www/public/vendor/scandipwa/source/src/app/util/Menu/Menu.js"],"names":["TYPE_CUSTOM_URL","TYPE_CMS_PAGE","TYPE_CATEGORY","console","log","unsortedItems","getSortedItems","Array","from","sort","PID","parent_id","P","position","prevPID","prevP","Menu","url","url_type","category_id","pathname","search","state","category","page","cms_page_identifier","item","getMenuUrl","children","obj","path","value","i","split","length","data","item_id","menuPositionReference","menu","getMenuData","undefined","setToValue","join","items","forEach","realMenuItem","createItem","Object","defineProperty","_Menu"],"mappings":"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","file":"bundle.e7f8f512dc4bd183d775.hot-update.js","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\n/* eslint-disable no-param-reassign */\n\nexport const TYPE_CUSTOM_URL = 0;\nexport const TYPE_CMS_PAGE = 1;\nexport const TYPE_CATEGORY = 2;\n\n/**\n * Given an array of menu items, returns a copy of the array, sorted by their parent ID, then by their sort order (position)\n *\n * @param unsortedItems an array of items to be sorted\n * @returns {array} the sorted array\n * @namespace Util/Menu/getSortedItems\n */\nconsole.log(unsortedItems)\nexport const getSortedItems = (unsortedItems) => Array.from(unsortedItems).sort((\n    { parent_id: PID, position: P },\n    { parent_id: prevPID, position: prevP }\n) => (PID - prevPID) || (P - prevP));\n\n/** @namespace Util/Menu */\n// eslint-disable-next-line @scandipwa/scandipwa-guidelines/derived-class-names\nexport class Menu {\n    getMenuUrl({ url, url_type, category_id }) {\n        switch (url_type) {\n        case TYPE_CATEGORY:\n            return {\n                pathname: url,\n                search: '',\n                state: { category: category_id }\n            };\n        case TYPE_CMS_PAGE:\n            return {\n                pathname: url,\n                search: '',\n                state: { page: true }\n            };\n        default:\n            return url;\n        }\n    }\n\n    getMenuData({\n        cms_page_identifier,\n        url,\n        url_type,\n        category_id,\n        ...item\n    }) {\n        return {\n            ...item,\n            url: this.getMenuUrl({ url, url_type, category_id }),\n            children: {}\n        };\n    }\n\n    setToValue(obj, path, value) {\n        // eslint-disable-next-line fp/no-let\n        let i;\n        path = path.split('.');\n        // eslint-disable-next-line fp/no-loops\n        for (i = 0; i < path.length - 1; i++) {\n            obj = obj[path[i]];\n        }\n        obj[path[i]] = value;\n    }\n\n    createItem(data) {\n        const { parent_id, item_id } = data;\n\n        if (parent_id === 0) {\n            this.menuPositionReference[item_id] = [];\n            this.menu[item_id] = this.getMenuData(data);\n        } else if (this.menuPositionReference[parent_id] !== undefined) {\n            this.menuPositionReference[item_id] = [\n                ...this.menuPositionReference[parent_id],\n                parent_id\n            ];\n\n            this.setToValue(\n                this.menu,\n                `${this.menuPositionReference[item_id].join('.children.')}.children.${item_id}`,\n                this.getMenuData(data)\n            );\n        }\n    }\n\n    reduce({ items: unsortedItems }) {\n        this.menu = {};\n        this.menuPositionReference = {};\n\n        getSortedItems(unsortedItems).forEach((realMenuItem) => {\n            this.createItem(realMenuItem);\n        });\n\n        return this.menu;\n    }\n}\n\nexport default new Menu();\n"],"sourceRoot":""}